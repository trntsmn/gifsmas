<!-- We need this view so that our animations can work, using Modernizr we'll
  populate capture-template based on the capabilities of the browser. I
  know this seems unnessary to but it's angularjs -->

<article class="{{vm.class}}" data-ng-controller="SubmissionController as vm" data-resize>
  <canvas id="baseCanvas"``>
    <!-- Temp storage for our image -->
  </canvas>

  <canvas id="cropCanvas">
    <!-- Temp storage for our image -->
  </canvas>
  <div class="row rel">
    <div class="camera">
      <div class="blocker">

        <video data-display-video='' id="baseVideo" controls= "false">Video stream not available.</video>

        <blockquote>
          <img id="basePhoto" data-ng-if="vm.appSvc.src" data-ng-src="{{vm.appSvc.src}}" />
        </blockquote>
        <img src="/images/placeholder.jpg" alt="You picture will appear here." class="placeholder"/>
      </div>
    </div>

    <div class="overlay" data-ng-if="vm.appSvc.overlay == 1">
      <img src="/images/1.gif" />
    </div>
    <div class="overlay" data-ng-if="vm.appSvc.overlay == 2">
      <img src="/images/2.gif" />
    </div>
    <div class="overlay" data-ng-if="vm.appSvc.overlay == 3">
      <img src="/images/3.gif" />
    </div>
    <div class="overlay" data-ng-if="vm.appSvc.overlay == 4">
      <img src="/images/4.gif" />
    </div>
    <div class="overlay" data-ng-if="vm.appSvc.overlay == 5">
      <img src="/images/5.gif" />
    </div>
    <div class="error abs" data-ng-if="vm.appSvc.displayError">
      <div>
        <div>
          <h2>Could not access camera.</h2>
          <h3>Please allow access and refresh the page or&nbsp;&nbsp; <a class='btn btn-default' data-ng-click='vm.activate("upload")'>upload an existing photo</a></h3>
        </div>
      </div>
    </div>
    <!-- End .error.abs -->
    <div class="error abs" data-ng-if="vm.appSvc.displayWrongFile">
      <div>
        <div>
          <h2>That doesn't look like any image format we know.</h2>
          <h3>Please try again.</h3>
        </div>
        <a data-ng-click="vm.dismiss()" class="close">X</a>
      </div>
    </div>
    <div  class="intro abs" data-ng-if="vm.appSvc.displayUploadIntro">
      <div>
        <div>
          <h2>Elfie 101 Tip: </h2>
          <h3>Hold your phone sideways and center yourself in the frame.</h3>
        </div>
        <a data-ng-click="vm.dismiss()" class="close">X</a>
      </div>
    </div>
    <div class="intro abs" data-ng-if="vm.appSvc.displayIntro">
      <div>
        <h2>1. Select your holiday filter below 2. Snap a picture (you look great) 3. Send it to your BFF</h2>
      </div>
      <a data-ng-click="vm.dismiss()" class="close">X</a>
    </div>
    <!-- End .error.abs -->
    <div class="userActions abs" data-ng-if="vm.appSvc.sharing">
      <div>
        <div class="social-shares" >
          <h4>Sharing is caring</h4>
          <facebook-share gif="vm.appSvc.gif"></facebook-share>
          <twitter-share gif="vm.appSvc.gif"></twitter-share>
          <pinterest-share gif="vm.appSvc.gif"></pinterest-share>
          <tumblr-share gif="vm.appSvc.gif"></tumblr-share>
          <link-share gif="vm.appSvc.gif"></link-share>
        </div>


      </div>
    </div>
  </div>


  <div class='row interface rel'>

    <div class="col-sm-6">
      <div class="controls" style="padding-bottom:0;" data-ng-if="vm.showing === 'upload'">
          <h4>First, upload an image of your selfie!</h4>

          <input type='button' class="btn btn-danger btn-lg" data-disjointed-capture='' value="upload image" />
          <input id="fileCapture" type="file" data-capture-file="" data-ng-model="vm.theFile" />
          <br>
          <a class="btn btn-warning" data-ng-click="vm.reset()">Reset</a>
      </div>
      <div class="overlays">

        <h4>Select your holiday filter</h4>
        <a data-ng-click="vm.overlay(1)">
          <img src="/images/1-btn.png" />
          <span>Put a bow on it</span>
        </a>
        <a data-ng-click="vm.overlay(2)">
          <img src="/images/2-btn.png" />
          <span>Elfie</span>
        </a>
        <a data-ng-click="vm.overlay(3)">
          <img src="/images/3-btn.png" />
          <span>Lump of Coal</span>
        </a>
        <a data-ng-click="vm.overlay(4)">
          <img src="/images/4-btn.png" />
          <span>Shiny red nose</span>
        </a>
        <a data-ng-click="vm.overlay(5)">
          <img src="/images/5-btn.png" />
          <span>Snowball battle scars</span>
        </a>
      </div>
    </div>




    <div class="col-sm-6">
      <div class="controls" data-ng-if="vm.showing === 'video'">
        <h4>Send it to your BFF</h4>
        <a class="btn btn-danger btn-lg" data-capture-video=''>Snap</a>

        <a data-ng-if="vm.appSvc.shareable" class="btn btn-default btn-lg" data-ng-click="vm.sharing(true)">Share</a>
        <br>
        <a class="btn btn-warning" data-ng-click="vm.reset()">Reset</a>

      </div>

      <div class="controls" data-ng-if="vm.showing === 'upload' && vm.appSvc.shareable">
        <h4>Send it to your BFF</h4>
          <a class="btn btn-default btn-lg" data-ng-click="vm.sharing(true)">Share</a>
      </div>
    </div>

  </div>
</article>
